## 安装git钩子
钩子默认放在 `.git/hooks`目录

## 客户端钩子
### 提交工作流钩子
#### `pre-commit`
在键入提交信息前运行, 如果该钩子以非0值退出，Git 将放弃此次提交（可以用 `git commit --no-verify` 来绕过这个环节）

#### `prepare-commit-msg`
钩子在启动提交信息编辑器之前，默认信息被创建之后运行。 它允许你编辑提交者所看到的默认信息。（该钩子接收一些选项：存有当前提交信息的文件的路径、提交类型和修补提交的提交的 SHA-1 校验）

#### `commit-msg`
该钩子接收一个参数：存有当前提交信息的临时文件的路径。 如果该钩子脚本以非0值退出，Git 将放弃提交

#### `post-commit`
钩子在整个提交过程完成后运行（该钩子一般用于通知之类的事情）

### 电子邮件工作流钩子
针对于`git am`命令

#### `applypatch-msg`
该钩子接收单个参数：包含请求合并信息的临时文件的名字。 如果脚本返回非0值，Git 将放弃该补丁

#### `pre-applypatch`
运行于应用补丁 之后，产生提交之前，可以用该钩子在提交前检查快照。如果脚本返回非0值，该补丁不会被提交

#### `post-applypatch`
运行于提交产生之后，是在`git am`运行期间最后被调用的钩子

### 其它客户端钩子

#### `pre-rebase`
运行于变基之前，以非0值退出可以中止变基的过程

#### `post-rewrite`
该钩子被那些会替换提交记录的命令调用，如`git commit --amend` 和 `git rebase`（不过不包括 `git filter-branch`），它唯一的参数是触发重写的命令名，同时从标准输入中接受一系列重写的提交记录

#### `post-checkout`
在`git checkout`成功运行后，该钩子会被调用

#### `post-merge`
在`git merge`成功运行后，该钩子会被调用

#### `pre-push`
在 `git push` 运行期间，更新了远程引用但尚未传送对象时被调用，接受远程分支的名字和位置作为参数，同时从标准输入中读取一系列待更新的引用，一个非0的退出码将终止推送过程

#### `pre-auto-gc`
Git 的一些日常操作在运行时，偶尔会调用 `git gc --auto` 进行垃圾回收。 `pre-auto-gc` 钩子会在垃圾回收开始之前被调用，可以用它来提醒你现在要回收垃圾了，或者依情形判断是否要中断回收

## 服务端钩子
这些钩子脚本在推送到服务器之前和之后运行，推送到服务器前运行的钩子可以在任何时候以非0值退出，拒绝推送并给客户端返回错误消息，还可以依你所想设置足够复杂的推送策略

#### `pre-receive`
处理来自客户端的推送操作时，最先被调用的脚本是 `pre-receive`。 它从标准输入获取一系列被推送的引用。如果它以非0值退出，所有的推送内容都不会被接受。 你可以用这个钩子阻止对引用进行非快进（non-fast-forward）的更新，或者对该推送所修改的所有引用和文件进行访问控制

#### `update`
会为每一个准备更新的分支各运行一次，它不会从标准输入读取内容，而是接受三个参数：引用的名字（分支），推送前的引用指向的内容的 SHA-1 值，以及用户准备推送的内容的 SHA-1 值。如果 update 脚本以非零值退出，只有相应的那一个引用会被拒绝；其余的依然会被更新

#### `post-receive`
在整个过程完结以后运行，可以用来更新其他系统服务或者通知用户，客户端在它结束运行之前将保持连接状态


- - -
**参考**：
- [自定义 Git - Git 钩子](https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90)